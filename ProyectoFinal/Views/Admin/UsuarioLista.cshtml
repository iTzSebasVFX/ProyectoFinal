@model ProyectoFinal.Models.UsViewModel

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/0ec24d2dc8.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="~/css/AdminRegistro.css">
    <title>AdministacionUsuarios</title>
</head>

<body>


    <div class="cards-wrapper">

        <div class="container">
            <a class="red" asp-action="PrincipalAdmin" asp-controller="Admin" style="text-decoration: none;">
                <h3>
                    <i class="fa-solid fa-person-walking-arrow-loop-left" style="color: #ffffff;"></i>
                    Volver
                </h3>
            </a>
            <h3>Tabla de Usuarios</h3>

            <div class="scroll-box">
                <div class="box">
                    @foreach (var item in Model.ListaUsu)
                    {
                        <div class="list">
                            <!-- Imagen del usuario -->
                            <div class="imgBx">
                                <img src="~/uploads/fotosinfoto.png" alt="Admin">

                                <!-- <img src="@Url.Content(item.FotoRuta ?? "~/uploads/fotosinfoto.png")" alt="Foto de perfil"
                                                                                                                width="150" height="150"
                                                                                                                onerror="this.onerror=null; this.src='/uploads/fotosinfoto.png';" /> -->
                            </div>
                            <!-- Contenido del usuario -->
                            <div class="content">
                                <h2 class="rank"><small>#</small>@item.id</h2>
                                <h4>@item.nombreCompleto</h4>
                                <p>P.Apellido: @item.apellidoCompleto</p>
                                <p>S.Apellido: @item.apellidoCompleto</p>
                                <p>Edad: @item.Edad</p>
                                <p>Teléfono: @item.numeroTelefono</p>
                                <p>País: @item.pais</p>
                                <p>Correo: @item.correoElectronico</p>
                                <p>Contraseña: @item.contrasena</p>
                                <p>Clave: @item.clave</p>
                                <p>Género: @item.Genero</p>
                            </div>
                            <div class="actions" style="display:flex; flex-direction: column; gap:5px; margin-left:auto;">
                                <button class="Btn" onclick='mostrarEditar2(@Html.Raw(Json.Serialize(item)))'>
                                    <span>Editar</span>
                                    <svg class="svg" viewBox="0 0 512 512">
                                        <path
                                            d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z">
                                        </path>
                                    </svg>
                                </button>
                                <a asp-action="EliminarUs" asp-controller="Admin" asp-route-id="@item.id"
                                    class="button delete-btn">
                                    <span>Eliminar</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-miterlimit="2"
                                        stroke-linejoin="round" fill-rule="evenodd" clip-rule="evenodd" width="20"
                                        height="20">
                                        <path fill-rule="nonzero"
                                            d="m12.002 2.005c5.518 0 9.998 4.48 9.998 9.997 0 5.518-4.48 9.998-9.998 9.998-5.517 0-9.997-4.48-9.997-9.998 0-5.517 4.48-9.997 9.997-9.997zm0 1.5c-4.69 0-8.497 3.807-8.497 8.497s3.807 8.498 8.497 8.498 8.498-3.808 8.498-8.498-3.808-8.497-8.498-8.497zm0 7.425 2.717-2.718c.146-.146.339-.219.531-.219.404 0 .75.325.75.75 0 .193-.073.384-.219.531l-2.717 2.717 2.727 2.728c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.384-.073-.53-.219l-2.729-2.728-2.728 2.728c-.146.146-.338.219-.53.219-.401 0-.751-.323-.751-.75 0-.192.073-.384.22-.531l2.728-2.728-2.722-2.722c-.146-.147-.219-.338-.219-.531 0-.425.346-.749.75-.749.192 0 .385.073.531.219z">
                                        </path>
                                    </svg>
                                </a>

                            </div>

                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="card2" id="card2">
            <div class="content2">
                <footer>
                    <div id="formInsertar">
                        <form class="medium" asp-action="InsertarUs" asp-controller="Admin" method="post">
                            <h2>formulario Insercion</h2>

                            <div class="fila1">

                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.nombreCompleto">Nombre
                                        Usuario</label>
                                    <input class="form-control" type="text" asp-for="NuevoUsuario.nombreCompleto">

                                </div>

                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.apellidoCompleto">Apellido
                                        Usuario</label>
                                    <input class="form-control" type="text" asp-for="NuevoUsuario.apellidoCompleto">

                                </div>
                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.Edad">Edad Usuario</label>
                                    <input class="form-control" type="number" asp-for="NuevoUsuario.Edad">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.numeroTelefono">Teléfono
                                        Usuario</label>
                                    <input class="form-control" type="text" asp-for="NuevoUsuario.numeroTelefono">
                                </div>
                            </div>
                            <!-- Contenido de la primera fila -->
                            <div class="med">
                                <div class="mb-3">

                                    <label class="form-label" asp-for="NuevoUsuario.pais">País Usuario</label>
                                    <input class="form-control" type="text" asp-for="NuevoUsuario.pais">

                                </div>
                            </div>

                            <div class="fila2">
                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.correoElectronico">Email
                                        Usuario</label>
                                    <input class="form-control" type="text" asp-for="NuevoUsuario.correoElectronico">

                                </div>

                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.contrasena">Contraseña
                                        Usuario</label>
                                    <input class="form-control" type="text" asp-for="NuevoUsuario.contrasena">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.clave">Clave Usuario</label>
                                    <input class="form-control" type="number" asp-for="NuevoUsuario.clave">
                                </div>
                                <div class="mb-3">

                                    <label class="form-label" asp-for="NuevoUsuario.Genero">Genero Usuario</label>
                                    <input class="form-control" type="text" asp-for="NuevoUsuario.Genero">
                                </div>
                            </div>
                            <!-- Contenido de la segunda fila -->

                            <button class="button2" type="submit">Registrar</button>
                        </form>

                    </div>
                    <div id="formEditar" style="display: none;">
                        <form class="medium2" asp-action="EditarUs" asp-controller="Admin" method="post">
                            <h2>formulario Edicion</h2>
                            <input type="hidden" id="editId" asp-for="NuevoUsuario.id" />
                            <div class="fila3">

                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.nombreCompleto">Nombre
                                        Usuario</label>
                                    <input class="form-control" type="text" id="editNombre"
                                        asp-for="NuevoUsuario.nombreCompleto">

                                </div>


                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.apellidoCompleto">Apellido
                                        Usuario</label>
                                    <input class="form-control" type="text" id="editApellido"
                                        asp-for="NuevoUsuario.apellidoCompleto">
                                </div>


                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.Edad">Edad Usuario</label>
                                    <input class="form-control" type="number" id="editEdad" asp-for="NuevoUsuario.Edad">
                                </div>


                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.numeroTelefono">Teléfono
                                        Usuario</label>
                                    <input class="form-control" type="text" id="editTelefono"
                                        asp-for="NuevoUsuario.numeroTelefono">
                                </div>


                            </div>

                            <div class="med2">
                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.pais">País Usuario</label>
                                    <input class="form-control" type="text" id="editPais" asp-for="NuevoUsuario.pais">
                                </div>

                            </div>

                            <div class="fila4">
                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.correoElectronico">Email
                                        Usuario</label>
                                    <input class="form-control" type="text" id="editEmail"
                                        asp-for="NuevoUsuario.correoElectronico" readonly>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.contrasena">Contraseña
                                        Usuario</label>
                                    <input class="form-control" type="text" id="editContrasena"
                                        asp-for="NuevoUsuario.contrasena" readonly>
                                </div>

                                <label class="form-label" asp-for="NuevoUsuario.clave">Clave Usuario</label>
                                <input class="form-control" type="number" id="editClave" asp-for="NuevoUsuario.clave">

                                <div class="mb-3">
                                    <label class="form-label" asp-for="NuevoUsuario.Genero">Genero Usuario</label>
                                    <input class="form-control" type="text" id="editgenero"
                                        asp-for="NuevoUsuario.Genero" />

                                </div>

                            </div>
                            <button class="button3" type="submit">Guardar Cambios</button>
                            <div aria-label="User Login Button" tabindex="0" role="button" class="user-profile">
                                <div class="user-profile-inner">
                                    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <g data-name="Layer 2" id="Layer_2">
                                            <path
                                                d="m15.626 11.769a6 6 0 1 0 -7.252 0 9.008 9.008 0 0 0 -5.374 8.231 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 9.008 9.008 0 0 0 -5.374-8.231zm-7.626-4.769a4 4 0 1 1 4 4 4 4 0 0 1 -4-4zm10 14h-12a1 1 0 0 1 -1-1 7 7 0 0 1 14 0 1 1 0 0 1 -1 1z">
                                            </path>
                                        </g>
                                    </svg>
                                    <a asp-action="UsuarioLista" asp-controller="Admin">Crear nuevo usuario</a>

                                </div>
                            </div>
                        </form>

                    </div>

                    @if (TempData["Error"] != null)
                    {
                        <div id="error" class="alert alert-danger">
                            @TempData["Error"]
                        </div>
                    }
                    @if (TempData["Valido"] != null)
                    {
                        <div id="valido" class="alert alert-success">
                            @TempData["Valido"]
                        </div>
                    }
                </footer>


            </div>
        </div>
    </div>


    <script>
        let error = document.getElementById('error');
        let valido = document.getElementById('valido');
        setTimeout(function () {
            error.style.display = 'none';
            valido.style.display = 'none';
        }, 5000);
    </script>
    <script>
        function mostrarEditar2(usuario) {
            console.log(usuario); // Para ver qué trae
            console.log(Object.keys(usuario)); // para ver cómo vienen los nombres

            // Mostrar el formulario
            document.getElementById('formEditar').style.display = 'block';
            document.getElementById('formInsertar').style.display = 'none';

            // Rellenar los campos del formulario
            document.getElementById('editId').value = usuario.id;
            document.getElementById('editNombre').value = usuario.nombreCompleto;
            document.getElementById('editApellido').value = usuario.apellidoCompleto;
            document.getElementById('editEdad').value = usuario.edad;
            document.getElementById('editTelefono').value = usuario.numeroTelefono;
            document.getElementById('editPais').value = usuario.pais;
            document.getElementById('editEmail').value = usuario.correoElectronico;
            document.getElementById('editContrasena').value = usuario.contrasena;
            document.getElementById('editClave').value = usuario.clave;
            document.getElementById('editgenero').value = usuario.genero;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>
    <script src="~/js/Tema.js"></script>
</body>

</html>